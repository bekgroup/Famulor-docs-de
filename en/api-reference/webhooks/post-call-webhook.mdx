---
title: "Post-Call Webhook"
icon: "webhook"
description: "Receive call completion notifications with extracted data and transcripts"
---

After each call finishes, Famulor automatically sends a POST request to your configured webhook URL. This payload includes call details, AI-extracted variables, conversation transcript, and optionally the recording link.

## Setting Up Webhooks

To receive post-call webhooks:

1. Set your webhook URL in [assistant settings](/ai-assistants/settings/post-call-actions#webhook-configuration)
2. Activate "Post call webhook" in [assistant configuration](/ai-assistants/settings/post-call-actions#webhook-configuration)
3. Configure which variables the AI should extract from conversations

## Webhook Request Format

The webhook is delivered as a POST request to your URL with JSON payload:

### Payload Structure

<ResponseField name="id" type="integer">
  Call identifier
</ResponseField>

<ResponseField name="customer_phone" type="string">
  Customer's phone number in E.164 format (example: "+1234567890") or null
</ResponseField>

<ResponseField name="assistant_phone" type="string">
  Assistant's phone number in E.164 format or null
</ResponseField>

<ResponseField name="duration" type="integer">
  Call length in seconds
</ResponseField>

<ResponseField name="status" type="string">
  Final call outcome (e.g., "completed", "busy", "failed")
</ResponseField>

<ResponseField name="extracted_variables" type="object">
  AI-extracted data based on your post-call schema
  <Expandable title="Example extracted variables">
    <ResponseField name="status" type="boolean">
      Whether the call objective was met
    </ResponseField>
    <ResponseField name="summary" type="string">
      Brief call summary
    </ResponseField>
    <ResponseField name="custom_variable" type="string|number|boolean">
      Any custom variables you configured
    </ResponseField>
  </Expandable>
</ResponseField>

<ResponseField name="input_variables" type="object">
  Variables provided to the assistant before call start
</ResponseField>

<ResponseField name="transcript" type="string">
  Full conversation transcript
</ResponseField>

<ResponseField name="recording_url" type="string">
  Download URL for call recording (only if enabled in [assistant settings](/ai-assistants/settings/post-call-actions#webhook-configuration))
</ResponseField>

<ResponseField name="created_at" type="string">
  ISO 8601 timestamp of call initiation
</ResponseField>

<ResponseField name="finished_at" type="string">
  ISO 8601 timestamp of call completion (uses call record's updated_at)
</ResponseField>

<ResponseField name="lead" type="object">
  Lead details (only for campaign calls)
  <Expandable title="Lead properties">
    <ResponseField name="id" type="integer">
      Lead identifier
    </ResponseField>
    <ResponseField name="phone_number" type="string">
      Lead's phone number
    </ResponseField>
    <ResponseField name="variables" type="object">
      Lead-associated variables
    </ResponseField>
    <ResponseField name="status" type="string">
      Lead's current status
    </ResponseField>
    <ResponseField name="created_at" type="string">
      Lead creation timestamp
    </ResponseField>
    <ResponseField name="updated_at" type="string">
      Lead last update timestamp
    </ResponseField>
    <ResponseField name="campaign" type="object">
      Campaign information (if available)
      <Expandable title="Campaign properties">
        <ResponseField name="id" type="integer">
          Campaign identifier
        </ResponseField>
        <ResponseField name="name" type="string">
          Campaign name
        </ResponseField>
        <ResponseField name="status" type="string">
          Campaign status
        </ResponseField>
        <ResponseField name="allowed_hours_start_time" type="string">
          Campaign start time window
        </ResponseField>
        <ResponseField name="allowed_hours_end_time" type="string">
          Campaign end time window
        </ResponseField>
        <ResponseField name="allowed_days" type="array">
          Days when campaign calls are allowed
        </ResponseField>
        <ResponseField name="max_calls_in_parallel" type="integer">
          Maximum simultaneous calls for this campaign
        </ResponseField>
        <ResponseField name="max_retries" type="integer">
          Maximum retry attempts per lead
        </ResponseField>
        <ResponseField name="retry_interval" type="integer">
          Minutes between retry attempts
        </ResponseField>
        <ResponseField name="created_at" type="string">
          Campaign creation timestamp
        </ResponseField>
        <ResponseField name="updated_at" type="string">
          Campaign last update timestamp
        </ResponseField>
      </Expandable>
    </ResponseField>
  </Expandable>
</ResponseField>

<ResponseExample>
```json 200 Post-Call Webhook Request
{
  "id": 12345,
  "customer_phone": "+1234567890",
  "assistant_phone": "+1987654321",
  "duration": 125,
  "status": "completed",
  "extracted_variables": {
    "status": true,
    "summary": "Customer interested in product demo",
    "lead_quality": "high",
    "next_action": "schedule_demo"
  },
  "input_variables": {
    "customer_name": "John Doe",
    "product_interest": "Pro Plan"
  },
  "transcript": [
    {
      "text": "Hello! This is Sarah from Famulor. How are you today?",
      "type": "transcript",
      "sender": "bot",
      "timestamp": 1756812511.315143
    },
    {
      "text": "Hi, I'm doing well, thanks for calling.",
      "type": "transcript",
      "sender": "human",
      "timestamp": 1756812514.104436
    },
    {
      "text": "I'm calling to tell you about our new product features.",
      "type": "transcript",
      "sender": "bot",
      "timestamp": 1756812522.918859
    },
    {
      "text": "That sounds interesting, tell me more.",
      "type": "transcript",
      "sender": "human",
      "timestamp": 1756812525.234567
    }
  ],
  "formatted_transcript": "AI: Hello! This is Sarah from Famulor. How are you today?\nCustomer: Hi, I'm doing well, thanks for calling.\nAI: I'm calling to tell you about our new product features.\nCustomer: That sounds interesting, tell me more.",
  "recording_url": "https://app.famulor.de/storage/recordings/call-12345.mp4",
  "created_at": "2025-01-15T10:30:00.000000Z",
  "finished_at": "2025-01-15T10:32:05.000000Z",
  "lead": {
    "id": 789,
    "phone_number": "+1234567890",
    "variables": {
      "source": "website",
      "interest_level": "high"
    },
    "status": "contacted",
    "created_at": "2025-01-15T09:00:00.000000Z",
    "updated_at": "2025-01-15T10:32:05.000000Z",
    "campaign": {
      "id": 456,
      "name": "Product Demo Campaign",
      "status": "active",
      "allowed_hours_start_time": "09:00",
      "allowed_hours_end_time": "17:00",
      "allowed_days": ["monday", "tuesday", "wednesday", "thursday", "friday"],
      "max_calls_in_parallel": 5,
      "max_retries": 3,
      "retry_interval": 60,
      "created_at": "2025-01-15T08:00:00.000000Z",
      "updated_at": "2025-01-15T08:00:00.000000Z"
    }
  }
}
```
</ResponseExample>

## Configuration Options

Customize your post-call webhook behavior:

- **Send webhook only on completed**: Only trigger webhooks for successfully completed calls
- **Include recording in webhook**: Add the `recording_url` field to the payload
- **Custom variables**: Define specific variables for AI to extract during conversations

## Important Notes

- `customer_phone` and `assistant_phone` may be `null` if unavailable
- `recording_url` is only included when "Include recording in webhook" is enabled in [assistant settings](/ai-assistants/settings/post-call-actions#webhook-configuration)
- The `lead` object only appears for campaign-related calls
- `extracted_variables` contains only the variables defined in your assistant's post-call schema
