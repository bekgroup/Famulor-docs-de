---
title: "Assistenten erstellen"
api: "POST https://app.famulor.de/api/user/assistant"
icon: "plus"
description: "Einen neuen KI-Assistenten mit spezifizierter Konfiguration erstellen"
---

> Einen neuen KI-Assistenten mit spezifizierter Konfiguration erstellen

Dieser Endpunkt ermöglicht es Ihnen, einen neuen KI-Assistenten mit umfassenden Konfigurationsoptionen zu erstellen.

## Engine-Modi

Die API unterstützt drei Engine-Modi mit unterschiedlichen Fähigkeiten:

| Modus        | Beschreibung                              | Erforderliche Felder  |
| ----------- | ------------------------------------------ | --------------------- |
| `pipeline`  | Klassische STT → LLM → TTS Pipeline         | `llm_model_id`        |
| `multimodal`| Echtzeit Multimodal-KI                     | `multimodal_model_id` |
| `dualplex`  | Multimodal “Brain” + Custom TTS-Voice      | `multimodal_model_id` |

## Request Body

### Erforderliche Kernfelder

<ParamField body="name" type="string" required>
  Der Name des Assistenten (max. 255 Zeichen)
</ParamField>

<ParamField body="voice_id" type="integer" required>
  Die Voice-ID für den Assistenten. Verwenden Sie den Endpunkt [Stimmen abrufen](/api-reference/assistants/voices) mit dem Query-Parameter `mode`, um kompatible Stimmen für Ihren Engine-Modus zu erhalten.
</ParamField>

<ParamField body="language_id" type="integer" required>
  Die Language-ID für den Assistenten. Verwenden Sie den Endpunkt [Sprachen abrufen](/api-reference/assistants/languages), um verfügbare Sprachen zu erhalten.
</ParamField>

<ParamField body="type" type="string" required>
  Der Assistenten-Typ. Optionen: `inbound`, `outbound`
</ParamField>

<ParamField body="mode" type="string" required>
  Der Engine-Modus. Optionen: `pipeline`, `multimodal`, `dualplex`
</ParamField>

<ParamField body="timezone" type="string" required>
  Die Zeitzone des Assistenten (z.B. "Europe/Berlin", "America/New\_York")
</ParamField>

<ParamField body="initial_message" type="string" required>
  Die erste Nachricht, die der Assistent beim Start des Anrufs spricht (max. 200 Zeichen)
</ParamField>

<ParamField body="system_prompt" type="string" required>
  Der System-Prompt, der Verhalten und Persönlichkeit des Assistenten definiert
</ParamField>

### Modus-spezifische Felder

<ParamField body="llm_model_id" type="integer">
  Die LLM-Model-ID. **Erforderlich für den Modus `pipeline`.**

  Verwenden Sie den Endpunkt [Modelle abrufen](/api-reference/assistants/models), um verfügbare Modelle zu erhalten.
</ParamField>

<ParamField body="multimodal_model_id" type="integer">
  Die Multimodal-Model-ID. **Erforderlich für die Modi `multimodal` und `dualplex`.**

  Verwenden Sie den Endpunkt [Modelle abrufen](/api-reference/assistants/models), um verfügbare Multimodal-Modelle zu erhalten.
</ParamField>

<ParamField body="chat_llm_fallback_id" type="integer">
  Fallback-LLM-Model-ID für Tool-Calls in `multimodal`/`dualplex`. Optional.
</ParamField>

<ParamField body="turn_detection_threshold" type="number">
  Empfindlichkeit der Turn-Detection in `multimodal`/`dualplex` (0-1). Standard: auto
</ParamField>

### Sekundäre Sprachen

<ParamField body="secondary_language_ids" type="integer[]">
  Array zusätzlicher Language-IDs, die der Assistent sprechen kann. Der Assistent erkennt die Sprache automatisch und wechselt entsprechend.

  ```json  theme={null}
  "secondary_language_ids": [2, 3, 4]
  ```
</ParamField>

### Knowledgebase-Einstellungen

<ParamField body="knowledgebase_id" type="integer">
  Die Knowledgebase-ID, die an diesen Assistenten angehängt werden soll
</ParamField>

<ParamField body="knowledgebase_mode" type="string">
  Wie die Knowledgebase verwendet wird. Optionen:

  * `function_call` - Die KI ruft eine Funktion zur Suche auf (erforderlich für `multimodal`/`dualplex`)
  * `prompt` - Wissen wird in den Prompt injiziert (nur `pipeline`)
</ParamField>

### Telefonnummer

<ParamField body="phone_number_id" type="integer">
  Die ID einer Telefonnummer, die dem Assistenten zugewiesen werden soll. Muss zu Ihrem Konto gehören.

  <Warning>
    Für `inbound` Assistenten darf die Telefonnummer kein Caller-ID Typ sein und darf nicht bereits einem anderen `inbound` Assistenten zugewiesen sein.
  </Warning>
</ParamField>

### Custom Mid-Call Tools

<ParamField body="tool_ids" type="integer[]">
  Array von IDs für Custom Mid-Call Tools, die angehängt werden sollen. Jedes Tool muss zu Ihrem Konto gehören.

  ```json  theme={null}
  "tool_ids": [1, 5, 12]
  ```
</ParamField>

### Built-in Tools

<ParamField body="tools" type="array">
  Array aktivierter Built-in Tools. Jedes Tool hat ein `type`-Feld und tool-spezifische Felder.

  <Expandable title="Tool-Typen">
    **call\_transfer** - Den Anruf an eine andere Telefonnummer weiterleiten

    * `phone_number` (required): Zielnummer (z.B. "+1234567890")
    * `description`: Wann weitergeleitet werden soll
    * `custom`: Wenn true, kann die KI die Transfer-Nummer dynamisch bestimmen
    * `timezone`: Zeitzone für Verfügbarkeiten

    **end\_call** - Den Anruf programmatisch beenden

    * `description`: Wann die KI den Anruf beenden soll

    **dtmf\_input** - DTMF-Töne senden (Tastatureingabe)

    * `description`: Wann DTMF genutzt werden soll (z.B. IVR-Navigation)

    **calendar\_integration** - Termine via Cal.com buchen

    * `calcom_api_key` (required): Ihr Cal.com API Key
    * `calcom_event_slug` (required): Event-Type Slug
    * `description`: Wann Terminbuchung angeboten werden soll
  </Expandable>

  ```json  theme={null}
  "tools": [
    {
      "type": "call_transfer",
      "phone_number": "+1234567890",
      "description": "Weiterleiten, wenn der Kunde menschlichen Support wünscht"
    },
    {
      "type": "dtmf_input",
      "description": "IVR-Menüs bei Bedarf navigieren"
    },
    {
      "type": "end_call",
      "description": "Anruf beenden, wenn der Kunde die Zufriedenheit bestätigt"
    }
  ]
  ```
</ParamField>

### Voice- und TTS-Einstellungen

<ParamField body="tts_emotion_enabled" type="boolean" default="true">
  Ob emotionale Text-to-Speech Synthese aktiviert ist
</ParamField>

<ParamField body="voice_stability" type="number" default="0.70">
  Voice-Stability (0-1). Höher = konsistenter
</ParamField>

<ParamField body="voice_similarity" type="number" default="0.50">
  Voice-Similarity (0-1). Höher = näher am Original
</ParamField>

<ParamField body="speech_speed" type="number" default="1.00">
  Sprechgeschwindigkeit-Multiplikator (0.7-1.2)
</ParamField>

<ParamField body="llm_temperature" type="number" default="0.10">
  LLM-Temperatur (0-1). Niedriger = deterministischer
</ParamField>

<ParamField body="synthesizer_provider_id" type="integer">
  Custom TTS Provider-ID. Wenn nicht gesetzt, wird anhand der Sprache automatisch ausgewählt.
</ParamField>

<ParamField body="transcriber_provider_id" type="integer">
  Custom STT Provider-ID. Wenn nicht gesetzt, wird anhand der Sprache automatisch ausgewählt. Nur `pipeline`.
</ParamField>

### Call-Behavior-Einstellungen

<ParamField body="allow_interruptions" type="boolean" default="true">
  Ob Unterbrechungen durch den Anrufer erlaubt sind.

  <Warning>Kann für `multimodal` und `dualplex` nicht deaktiviert werden.</Warning>
</ParamField>

<ParamField body="fillers" type="boolean" default="false">
  Ob Filler-Audio während der Verarbeitung verwendet werden soll (z.B. "äh", "einen Moment").

  <Warning>Nur verfügbar im Modus `pipeline`.</Warning>
</ParamField>

<ParamField body="record" type="boolean" default="false">
  Ob der Anruf aufgezeichnet werden soll
</ParamField>

<ParamField body="enable_noise_cancellation" type="boolean" default="true">
  Ob Noise-Cancellation aktiviert werden soll
</ParamField>

<ParamField body="wait_for_customer" type="boolean" default="false">
  Wenn true, wartet der Assistent, bis der Kunde zuerst spricht
</ParamField>

### Timing-Einstellungen

<ParamField body="max_duration" type="integer" default="600">
  Maximale Anrufdauer in Sekunden (20-1200)
</ParamField>

<ParamField body="max_silence_duration" type="integer" default="40">
  Maximale Stille-Dauer bis zur Re-Engagement in Sekunden (1-360)
</ParamField>

<ParamField body="max_initial_silence_duration" type="integer">
  Maximale Stille direkt beim Anrufstart, bevor beendet wird (1-120 Sekunden). Optional.
</ParamField>

<ParamField body="ringing_time" type="integer" default="30">
  Maximale Klingelzeit, bevor abgebrochen wird (1-60 Sekunden)
</ParamField>

### Re-Engagement-Einstellungen

<ParamField body="reengagement_interval" type="integer" default="30">
  Re-Engagement Intervall in Sekunden (7-600)
</ParamField>

<ParamField body="reengagement_prompt" type="string">
  Custom Prompt für Re-Engagement-Nachrichten (max. 1000 Zeichen)

  Beispiel: `"Sind Sie noch dran? Haben Sie noch weitere Fragen?"`
</ParamField>

### Voicemail-Einstellungen

<ParamField body="end_call_on_voicemail" type="boolean" default="true">
  Ob der Anruf beendet werden soll, wenn Voicemail erkannt wird
</ParamField>

<ParamField body="voice_mail_message" type="string">
  Nachricht, die auf der Voicemail hinterlassen wird (max. 1000 Zeichen)
</ParamField>

### Endpoint-Detection

<ParamField body="endpoint_type" type="string" default="vad">
  Voice-Activity-Detection-Typ. Optionen: `vad`, `ai`
</ParamField>

<ParamField body="endpoint_sensitivity" type="number" default="0.5">
  Endpoint-Sensitivity (0-5)
</ParamField>

<ParamField body="interrupt_sensitivity" type="number" default="0.5">
  Interrupt-Sensitivity (0-5)
</ParamField>

<ParamField body="min_interrupt_words" type="integer">
  Mindestanzahl an Wörtern, bevor eine Unterbrechung erlaubt wird (0-10). Zum Aktivieren setzen.
</ParamField>

### Ambient Sound

<ParamField body="ambient_sound" type="string">
  Hintergrund-Ambient-Sound. Optionen: `off`, `office`, `city`, `forest`, `crowded_room`, `cafe`, `nature`
</ParamField>

<ParamField body="ambient_sound_volume" type="number" default="0.5">
  Ambient-Sound-Lautstärke (0-1)
</ParamField>

### Webhook-Konfiguration

<ParamField body="is_webhook_active" type="boolean" default="false">
  Ob Webhook-Benachrichtigungen aktiviert sind
</ParamField>

<ParamField body="webhook_url" type="string">
  Die Webhook-URL für Post-Call Benachrichtigungen. **Erforderlich, wenn `is_webhook_active` true ist.**
</ParamField>

<ParamField body="send_webhook_only_on_completed" type="boolean" default="true">
  Ob Webhooks nur bei abgeschlossenen Anrufen gesendet werden sollen (nicht bei failed/no-answer)
</ParamField>

<ParamField body="include_recording_in_webhook" type="boolean" default="true">
  Ob Recording-URL in der Webhook-Payload enthalten sein soll
</ParamField>

### Post-Call Evaluation

<ParamField body="post_call_evaluation" type="boolean" default="true">
  Ob AI Post-Call Evaluation aktiviert ist
</ParamField>

<ParamField body="post_call_schema" type="array">
  Schema-Definition für Post-Call Datenextraktion

  <Expandable title="post_call_schema Eigenschaften">
    <ParamField body="name" type="string" required>
      Feldname (3-16 Zeichen, lowercase, nur alphanumerisch und underscores)
    </ParamField>

    <ParamField body="type" type="string" required>
      Datentyp. Optionen: `string`, `number`, `bool`
    </ParamField>

    <ParamField body="description" type="string" required>
      Beschreibung, was dieses Feld repräsentiert (3-255 Zeichen)
    </ParamField>
  </Expandable>

  ```json  theme={null}
  "post_call_schema": [
    {"name": "status", "type": "bool", "description": "Wurde das Anrufziel erreicht"},
    {"name": "summary", "type": "string", "description": "Kurze Zusammenfassung des Anrufs"}
  ]
  ```
</ParamField>

### Variablen

<ParamField body="variables" type="object">
  Key-Value Paare von Custom Variablen, die in Prompts via `{{variable_name}}` genutzt werden können

  ```json  theme={null}
  "variables": {
    "company_name": "Acme GmbH",
    "product": "Premium Widget",
    "support_email": "support@acme.com"
  }
  ```
</ParamField>

---

## Beispiel-Requests

### `pipeline` Modus Assistent

```json  theme={null}
{
  "name": "Sales Assistant",
  "voice_id": 1,
  "language_id": 1,
  "type": "outbound",
  "mode": "pipeline",
  "timezone": "Europe/Berlin",
  "initial_message": "Hallo! Wie kann ich Ihnen heute helfen?",
  "system_prompt": "Du bist ein professioneller Sales Assistant...",
  "llm_model_id": 2,
  "secondary_language_ids": [2, 3],
  "knowledgebase_id": 1,
  "knowledgebase_mode": "prompt",
  "fillers": true,
  "tool_ids": [1, 5],
  "tools": [
    {"type": "end_call", "description": "Beende den Anruf, wenn der Kunde zufrieden ist"},
    {"type": "call_transfer", "phone_number": "+1234567890", "description": "Weiterleiten an Support"}
  ],
  "reengagement_interval": 20,
  "reengagement_prompt": "Sind Sie noch dran?"
}
```

### `multimodal` Modus Assistent

```json  theme={null}
{
  "name": "Support Bot",
  "voice_id": 41,
  "language_id": 1,
  "type": "inbound",
  "mode": "multimodal",
  "timezone": "America/New_York",
  "initial_message": "Hi! Willkommen beim Support.",
  "system_prompt": "Du bist ein hilfreicher Support-Agent...",
  "multimodal_model_id": 1,
  "chat_llm_fallback_id": 2,
  "turn_detection_threshold": 0.7,
  "knowledgebase_id": 1,
  "knowledgebase_mode": "function_call",
  "tts_emotion_enabled": false
}
```

### `dualplex` Modus Assistent

```json  theme={null}
{
  "name": "Premium Agent",
  "voice_id": 1,
  "language_id": 2,
  "type": "outbound",
  "mode": "dualplex",
  "timezone": "Europe/Berlin",
  "initial_message": "Guten Tag!",
  "system_prompt": "Du bist ein professioneller Assistent...",
  "multimodal_model_id": 4,
  "chat_llm_fallback_id": 2,
  "secondary_language_ids": [1, 3],
  "knowledgebase_id": 1,
  "knowledgebase_mode": "function_call",
  "ambient_sound": "office",
  "ambient_sound_volume": 0.3
}
```

---

## Response

<ResponseField name="message" type="string">
  Erfolgsmeldung, die die Erstellung des Assistenten bestätigt
</ResponseField>

<ResponseField name="data" type="object">
  <Expandable title="properties">
    <ResponseField name="id" type="integer">
      Die eindeutige Kennung des erstellten Assistenten
    </ResponseField>

    <ResponseField name="name" type="string">
      Der Name des Assistenten
    </ResponseField>

    <ResponseField name="status" type="string">
      Der aktuelle Status (`inactive` für neu erstellte Assistenten)
    </ResponseField>

    <ResponseField name="type" type="string">
      Der Typ (`inbound` oder `outbound`)
    </ResponseField>

    <ResponseField name="mode" type="string">
      Der Engine-Modus (`pipeline`, `multimodal` oder `dualplex`)
    </ResponseField>
  </Expandable>
</ResponseField>

<ResponseExample>
  ```json 201 Success Response theme={null}
  {
    "message": "Assistant created successfully",
    "data": {
      "id": 789,
      "name": "Sales Assistant",
      "status": "inactive",
      "type": "outbound",
      "mode": "pipeline"
    }
  }
  ```

  ```json 422 Validation Error theme={null}
  {
    "message": "Validation failed",
    "errors": {
      "name": ["The name field is required."],
      "voice_id": ["The selected voice is not compatible with the chosen engine type."],
      "knowledgebase_mode": ["Only function_call mode is available for multimodal assistants."]
    }
  }
  ```
</ResponseExample>

---

## Hinweise

* Alle erforderlichen Felder müssen für eine erfolgreiche Erstellung angegeben werden
* Verwenden Sie den Endpunkt [Stimmen abrufen](/api-reference/assistants/voices) mit dem Query-Parameter `mode`, um kompatible Stimmen zu erhalten
* Für `multimodal`/`dualplex` muss `knowledgebase_mode` auf `function_call` gesetzt sein
* Für `multimodal`/`dualplex` ist `allow_interruptions` immer aktiv
* `fillers` ist nur im Modus `pipeline` verfügbar
* Neue Assistenten werden standardmäßig mit Status `inactive` erstellt
